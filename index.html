<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EternaGlow ‚Äî Atelier artisanal</title>
  <meta name="description" content="Bougies transparentes & moul√©es, savons doux, bracelets macram√© et rituels apaisants. Pr√©-commandes et sur-mesure." />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Bandeau promo -->
  <div class="launch-banner">
    üå∏ S√©rie limit√©e üå∏ Coffret D√©couverte : 1 bougie + 1 savon + 1 bracelet üëâ 
    <a href="coffret.html" class="btn-banner">Je d√©couvre</a>
  </div>

  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="wrap">
      <a class="brand" href="index.html" aria-label="Accueil EternaGlow">
        <span class="brand-logo" aria-hidden="true">‚ú®</span>
        <span class="brand-text">EternaGlow</span>
      </a>
      <nav class="nav" role="navigation" aria-label="Navigation principale">
        <a class="nav-link" href="bougies.html">Bougies</a>
        <a class="nav-link" href="chakras.html">Chakra</a>
        <a class="nav-link" href="bracelets.html">Bracelets</a>
        <a class="nav-link" href="savons.html">Savons</a>
        <a class="nav-link" href="rituels.html">Rituels</a>
        <a class="nav-link" href="devis.html">Devis</a>
        <a class="nav-link" href="temoignages.html">T√©moignages</a>
      </nav>
      <div class="cart-area">
        <button class="cart-button" id="openCartBtn" aria-label="Ouvrir le panier">
          üõí <span id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="wrap">
      <h1>Une lumi√®re douce pour la maison et le c≈ìur</h1>
      <p class="lead">Bougies transparentes & moul√©es, savons d√©licats, bracelets macram√© et rituels apaisants ‚Äî fa√ßonn√©s √† la main.</p>
      <div class="hero-cta">
        <a class="btn btn-primary" href="chakras.html">D√©couvrir les Bougies Chakra</a>
        <a class="btn" href="devis.html" class="btn-voeu">Faites un voeu‚ú®</a>
      </div>
    </div>
  </section>

  <!-- Cat√©gories -->
  <main>
    <section class="section" aria-labelledby="tit-cats">
      <div class="wrap">
        <h2 id="tit-cats">Nos univers</h2>
        <p class="sub">Pr√©-commandes & sur-mesure. Photos r√©elles √† venir.</p>
        <div class="grid">
          <a class="card category" href="chakras.html">
            <img src="images/7chakras.png" />
            <div class="card-body"><h3>Bougies Chakra</h3><p>7 bougies align√©es aux centres √©nerg√©tiques.</p></div>
          </a>
          <a class="card category" href="bougies.html">
            <img src="images/bougieslune.png" width="1000" height="700" loading="lazy" />
            <div class="card-body"><h3>Bougies</h3><p>Transparences, inclusions & formes moul√©es.</p></div>
          </a>
          <a class="card category" href="savons.html">
            <img src="images/savon-transparent.png" alt="Savons ‚Äî visuel √† venir" width="1000" height="700" loading="lazy" />
            <div class="card-body"><h3>Savons</h3><p>Transparent fleurs & recette douce karit√©.</p></div>
          </a>
          <a class="card category" href="bracelets.html">
            <img src="images/bracelet.png" alt="Bracelets macram√© ‚Äî visuel √† venir" width="1000" height="700" loading="lazy" />
            <div class="card-body"><h3>Bracelets macram√©</h3><p>Perles quartz rose, am√©thyste‚Ä¶</p></div>
          </a>
        </div>
      </div>
    </section>

    <!-- Sur-mesure -->
    <section class="contact-band" aria-labelledby="surmesure">
      <div class="wrap" id="surmesure">
        <h2>Sur-mesure & pr√©-commandes</h2>
        <p>Inclusion sp√©cifique (coquillages, fleurs, cristaux) ou forme particuli√®re ? √âcrivez-nous.</p>
        <div class="band-actions">
          <a class="btn btn-wa" target="_blank" rel="noopener" href="https://wa.me/33749586005?text=Bonjour%20EternaGlow%2C%20j%E2%80%99aimerais%20un%20devis%20pour%20...">√âcrire sur WhatsApp</a>
        </div>
        <p class="tiny">R√©ponse sous 24‚Äì48 h ouvr√©es.</p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo">
    <div class="wrap">
      <p>¬© 2025 EternaGlow ‚Äî Tous droits r√©serv√©s</p>
      <nav class="footer-nav" aria-label="Liens l√©gaux">
         <a href="faq.html">FAQ</a>
        <a href="apropos.html">√Ä propos</a>
        <a href="mentions-legales.html">Mentions l√©gales</a>
        <a href="politique-confidentialite.html">Confidentialit√©</a>
      </nav>
    </div>
  </footer>

  <!-- Drawer Panier -->
<aside id="cartDrawer" class="cart-drawer" aria-hidden="true" role="dialog" aria-labelledby="cartTitle">
  <div class="cart-header">
    <h2 id="cartTitle">Votre panier</h2>
    <button id="closeCartBtn" class="cart-close" aria-label="Fermer">√ó</button>
  </div>
  
  <div id="cartItems" class="cart-items"></div>
  
  <div class="cart-footer">
    <div class="cart-total">
      Total : <span id="cartTotal">0 ‚Ç¨</span>
    </div>

    <div class="cart-actions">
      <button id="clearCartBtn" class="btn">Vider</button>
      <!-- Bouton PayPal -->
      <div id="paypal-button-container" style="margin-top:10px; width:100%;"></div>
    </div>
    
    <p class="tiny" style="margin-top:8px;">
      Paiement s√©curis√© via PayPal (CB ou compte).  
      Libell√© : <b>EternaGlow</b> + vos produits.
    </p>
  </div>
</aside>
  
 <!-- SDK PayPal (sandbox pour tests : remplace 'sb' par ton vrai client-id quand tu l'auras) -->
<script src="https://www.paypal.com/sdk/js?client-id=sb&currency=EUR"></script>

<script>
  // Convertit "12,50 ‚Ç¨" -> "12.50"
  function getCartTotalNumber() {
    const raw = (document.getElementById('cartTotal')?.textContent || '0')
      .replace(/\s/g,'').replace('‚Ç¨','').replace(',', '.');
    const n = parseFloat(raw);
    return isNaN(n) ? 0 : Number(n.toFixed(2));
  }

  function renderPayPalButtons() {
    const container = document.getElementById('paypal-button-container');
    if (!window.paypal || !container) return;

    // Recr√©er proprement si on rouvre le panier
    container.innerHTML = '';

    paypal.Buttons({
      style: { layout: 'vertical', color: 'gold', shape: 'rect', label: 'paypal' },

      createOrder: (data, actions) => {
        const total = getCartTotalNumber();
        if (total <= 0) {
          alert("Votre panier est vide.");
          throw new Error('Empty cart');
        }

        const produits = Array.from(document.querySelectorAll('#cartItems .line-info strong'))
          .map(el => el.textContent.trim());

        const description = 'EternaGlow ‚Äî ' + (produits.join(', ') || 'Commande');

        return actions.order.create({
          purchase_units: [{
            description,
            amount: { currency_code: 'EUR', value: total },
            custom_id: 'EternaGlow-' + Date.now()
          }]
        });
      },

      onApprove: (data, actions) =>
        actions.order.capture().then(details => {
          alert(`Merci ${details.payer?.name?.given_name || ''} ‚ú®, paiement confirm√© !`);
          window.location.href = 'merci.html';
        }),

      onError: (err) => {
        console.error(err);
        alert("Paiement PayPal indisponible pour l‚Äôinstant.");
      }
    }).render('#paypal-button-container');
  }

  // Rendre au chargement et √† l‚Äôouverture du panier
  document.addEventListener('DOMContentLoaded', renderPayPalButtons);
  document.getElementById('openCartBtn')?.addEventListener('click', renderPayPalButtons);

  // IMPORTANT : apr√®s chaque add/remove produit dans ton script de panier,
  // appelle aussi renderPayPalButtons() pour rafra√Æchir le montant.
</script>

  <script src="script.js"></script>
</body>
</html>
